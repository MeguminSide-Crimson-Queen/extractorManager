<input id="url" placeholder="Pega la URL" style="width:100%">
<button onclick="start()">Descargar</button>

<script>
async function start() {
  const url = document.getElementById("url").value
  const worker = "https://extratormanager.freeblueth67.workers.dev/" + encodeURIComponent(url)

  const res = await fetch(worker)
  const images = await res.json()

  const zip = new JSZip()
  let index = 0

  for (const imgUrl of images) {
    const imgRes = await fetch(imgUrl)
    const blob = await imgRes.blob()

    const ext = blob.type.split("/")[1] || "jpg"
    const name = String(index).padStart(2, "0") + "." + ext

    zip.file(name, blob)
    index++
  }

  const content = await zip.generateAsync({ type: "blob" })

  const a = document.createElement("a")
  a.href = URL.createObjectURL(content)
  a.download = "imagenes.zip"
  a.click()
}
</script>
